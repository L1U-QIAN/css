<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>fe 21 css3 animation</title>
        <style>
            .block {
                background: lightblue;
                width: 100px;
                height: 100px;
            }
            .spin {
                animation: spin linear 2s;
                animation-iteration-count: 1;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>
    <body>
        <div class="block">
            方块
        </div>
        <button class="play">播放动画</button>
        <script>
            var e = function(sel) {
                return document.querySelector(sel)
            }

            var playAnimation = function() {
                var block = e('.block')
                // 让它开始播放动画
                block.classList.add('spin')

            }

            var __main = function() {
                e('.play').addEventListener('click', function(e) {
                    playAnimation()
                })
                // 绑定一个 animationend 事件, 在动画结束后删除动画 class
                var block = e('.block')
                block.addEventListener('animationend', function(){
                    block.classList.remove('spin')
                })
            }

            __main()
            /*
                animationend 事件
                    在动画播完后触发
                    动画播放被暂停不会触发
                animationiteration 事件
                    在动画播放一轮后触发
                    如果动画只播放一轮, 那么不会触发此事件
                利用事件测试动画
            */
        </script>
    </body>
</html>
